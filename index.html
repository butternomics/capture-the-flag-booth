<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="theme-color" content="#1B3A2D">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="description" content="Capture the Flag ATL — Visit 16 Atlanta neighborhoods, take photos with custom frames, and track your progress during FIFA World Cup 2026">
  <title>Capture the Flag ATL — Showcase Atlanta</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="app" data-screen="landing">

    <!-- SCREEN: Location Picker (no ?loc= param) -->
    <section id="screen-picker" class="screen">
      <header class="app-header">
        <div class="logo-lockup">
          <h1 class="logo-text">CAPTURE THE FLAG</h1>
          <p class="logo-sub">ATL</p>
        </div>
        <p class="tagline" data-i18n="showcaseAtlanta">Showcase Atlanta</p>
      </header>

      <p class="picker-prompt">Choose a neighborhood</p>
      <div id="location-picker-grid" class="picker-grid"></div>

      <footer class="app-footer">
        <p class="footer-text" data-i18n="footer">World Welcome to Atlanta</p>
        <button id="btn-lang" class="btn-text btn-lang" data-i18n="switchLang">Espa&ntilde;ol</button>
      </footer>
    </section>

    <!-- SCREEN: Location Landing -->
    <section id="screen-landing" class="screen">
      <header class="app-header">
        <div class="logo-lockup">
          <h1 class="logo-text">CAPTURE THE FLAG</h1>
          <p class="logo-sub">ATL</p>
        </div>
      </header>

      <div class="landing-card">
        <div id="landing-flag" class="landing-flag"></div>
        <h2 id="landing-location-name" class="landing-name"></h2>
        <p id="landing-country" class="landing-country"></p>
        <p id="landing-tagline" class="landing-tagline"></p>
      </div>

      <button id="btn-capture" class="btn btn-primary btn-lg">
        <span data-i18n="captureThisFlag">Capture This Flag</span>
      </button>

      <footer class="app-footer">
        <p class="footer-text" data-i18n="footer">World Welcome to Atlanta</p>
      </footer>
    </section>

    <!-- SCREEN: Format Selection -->
    <section id="screen-select" class="screen">
      <header class="app-header-sm">
        <h2 class="section-title" data-i18n="chooseFormat">Choose your format</h2>
      </header>

      <div class="format-options">
        <button class="format-btn" data-format="portrait">
          <div class="format-preview" style="aspect-ratio: 4/5;">
            <span class="format-label" data-i18n="portrait">Portrait</span>
            <span class="format-size">4:5</span>
          </div>
        </button>
        <button class="format-btn" data-format="story">
          <div class="format-preview" style="aspect-ratio: 9/16;">
            <span class="format-label" data-i18n="story">Story</span>
            <span class="format-size">9:16</span>
          </div>
        </button>
        <button class="format-btn" data-format="square">
          <div class="format-preview" style="aspect-ratio: 1/1;">
            <span class="format-label" data-i18n="square">Square</span>
            <span class="format-size">1:1</span>
          </div>
        </button>
      </div>

      <button id="btn-back-to-landing" class="btn-text" onclick="document.getElementById('app').setAttribute('data-screen','landing')">&larr; <span data-i18n="back">Back</span></button>
    </section>

    <!-- SCREEN: Edit & Position -->
    <section id="screen-edit" class="screen">
      <div id="canvas-wrapper">
        <canvas id="preview-canvas"></canvas>
        <div id="upload-overlay">
          <div class="upload-prompt">
            <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
            <span data-i18n="tapToUpload">Tap to upload photo</span>
          </div>
        </div>
      </div>
      <input type="file" id="photo-input" accept="image/*" hidden>

      <div class="edit-controls">
        <button id="btn-upload" class="btn btn-secondary">
          <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
          <span data-i18n="changePhoto">Change Photo</span>
        </button>
        <button id="btn-download" class="btn btn-primary" disabled>
          <span data-i18n="downloadPhoto">Download Photo</span>
        </button>
      </div>
      <p id="edit-hint" class="hint" data-i18n="dragHint">Drag to position. Pinch to zoom.</p>

      <button id="btn-back" class="btn-text">&larr; <span data-i18n="back">Back</span></button>
    </section>

    <!-- EMAIL CAPTURE MODAL -->
    <div id="email-modal" class="modal-overlay">
      <div class="modal-card">
        <h3 class="modal-title" data-i18n="almostThere">Almost there!</h3>
        <p class="modal-desc" data-i18n="emailPrompt">Enter your info to download and track your progress.</p>
        <form id="email-form" class="modal-form">
          <input type="text" id="input-first-name" required autocomplete="given-name"
                 data-i18n-placeholder="firstName" placeholder="First Name">
          <input type="email" id="input-email" required autocomplete="email"
                 data-i18n-placeholder="emailAddress" placeholder="Email Address">
          <button type="submit" class="btn btn-primary btn-full" data-i18n="downloadMyPhoto">Download My Photo</button>
        </form>
        <button id="btn-skip-email" class="btn-text" data-i18n="skipForNow">Skip for now</button>
      </div>
    </div>

    <!-- SCREEN: Done -->
    <section id="screen-done" class="screen">
      <div class="done-content">
        <div class="done-check">&#10003;</div>
        <h2 data-i18n="photoSaved">Photo Saved!</h2>
        <p class="done-message"><span data-i18n="shareMessage">Share it with</span> <strong>#CaptureTheFlagATL</strong></p>
        <p id="ios-hint" class="ios-hint" hidden data-i18n="iosHint">Long-press the image to save it to your camera roll.</p>
      </div>
      <div class="done-actions">
        <button id="btn-another" class="btn btn-primary btn-full" data-i18n="captureAnother">Capture Another Flag</button>
        <button id="btn-progress" class="btn btn-secondary btn-full" data-i18n="viewProgress">View My Progress</button>
      </div>
    </section>

    <!-- SCREEN: Progress -->
    <section id="screen-progress" class="screen">
      <header class="app-header-sm">
        <h2 class="section-title" data-i18n="yourProgress">Your Progress</h2>
      </header>

      <div class="progress-summary">
        <div class="progress-numbers">
          <span id="progress-count" class="progress-big">0</span>
          <span class="progress-sep" data-i18n="of">of</span>
          <span id="progress-total" class="progress-big">16</span>
        </div>
        <p class="progress-label" data-i18n="flagsCaptured">flags captured</p>
        <div class="progress-bar-track">
          <div id="progress-bar" class="progress-bar-fill" style="width: 0%"></div>
        </div>
        <p id="progress-message" class="progress-msg"></p>
      </div>

      <ul id="progress-list" class="progress-list"></ul>

      <div class="progress-actions">
        <button id="btn-capture-more" class="btn btn-primary btn-full" data-i18n="captureMore">Capture More Flags</button>
        <button id="btn-leaderboard" class="btn btn-secondary btn-full" data-i18n="leaderboard">Leaderboard</button>
      </div>
    </section>

    <!-- SCREEN: Leaderboard -->
    <section id="screen-leaderboard" class="screen">
      <header class="app-header-sm">
        <h2 class="section-title" data-i18n="topExplorers">Top Explorers</h2>
      </header>

      <ol id="leaderboard-list" class="leaderboard-list"></ol>

      <button id="btn-leaderboard-back" class="btn-text">&larr; <span data-i18n="back">Back</span></button>
    </section>

  </div>

  <script type="module" src="js/app.js"></script>
</body>
</html>
